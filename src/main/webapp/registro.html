<!DOCTYPE html>

<html lang="es">
<head>
	<meta charset="utf-8">
	<title>registro</title>
    <script type="text/javascript" src="js/generic.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	
	<link rel="stylesheet" type="text/css" href="css/registro.css">
</head>
<body>
	<div class="contenedor">
		<h2>Bilardos Bank</h2>
			<br />
		<form class="registro" id="registro">
			<div class="form-group">
   				 
   				 <input type="text" class="form-control" id="nombre" placeholder="Nombre">
  			</div>
  			<div class="form-group">
   				
   				 <input type="text" class="form-control"  id="apellido" placeholder="Apellido">
  			</div>
			
			<div class="form-group">
				<label for="fn">Fecha de nacimiento:</label>
				<input type="date" name="fn" id="fn">
			</div>
  		
  			<div class="form-group">
   				 
   				 <input type="text" class="form-control" id="documento" placeholder="Documento">
  			</div>
  			<div class="form-group">
   				
   			 	<input type="password" class="form-control" id="pw" placeholder="ContraseÃ±a">
  			</div>

  			<button type="button" class="btn btn-success" id="btn" role="link" >Validar</button>
	</form>

	</div>
    <script>
    $( "#btn" ).bind('click', function() {

       var data = JSON.stringify({
            "apellidos": $('#nombre').val().trim(),
            "documento": $('#documento').val().trim(),
            "estadoCrediticio": "4",
            "fechaNacimiento": $('#fn').val().trim()+'T00:00:00Z[UTC]',
            "idCuenta": 2,
            "nombres": $('#nombre').val().trim(),
            "password": $('#pw').val().trim()
        });
        var xhr = new XMLHttpRequest();
        xhr.withCredentials = true;

        xhr.addEventListener("readystatechange", function () {
          if (this.readyState === this.DONE) {
            console.log(this.responseText);
          }
        });

        xhr.open("POST", "http://localhost:8080/bancobilardos/rest/cliente");
        xhr.setRequestHeader("content-type", "application/json");

        xhr.send(data);
    });

      
    

    function calcularEdad(fechaNacimiento){
      var hoy = new Date();
      var cumpleanos = new Date(fechaNacimiento);
      var edad = hoy.getFullYear() - cumpleanos.getFullYear(); 
      var mes = hoy.getMonth() - cumpleanos.getMonth();

      if (mes < 0 || (mes === 0 && hoy.getDate() < cumpleanos.getDate())) {
        edad--;
      }

      return edad;
  }


  function validar(fechaNacimiento){
//    if(calcularEdad(fechaNacimiento)>15){
//        alert('usuario creado');
//    }else {
//      alert('El cliente ingresado es menor de edad');
//    }

  }
  
  </script>
</body>
</html>